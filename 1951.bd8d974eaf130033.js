"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1951],{51967:function(e,r,t){t.d(r,{y:function(){return d}});var n=t(59499),i=t(36864),o=t(49501),a=t(58527),s=t(85893);function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var d=function(e){var r=(0,i.Z)({},e);return(0,s.jsx)(a.G,l(l({},r),{},{children:(0,s.jsx)(o.cC,{id:"The Maximum LTV ratio represents the maximum borrowing power of a specific collateral. For example, if a collateral has an LTV of 75%, the user can borrow up to 0.75 worth of ETH in the principal currency for every 1 ETH worth of collateral."})}))}},91951:function(e,r,t){t.r(r),t.d(r,{EmodeModal:function(){return ce}});var n,i=t(67294),o=t(47130),a=t(8195),s=t(31959),c=t(59499),l=t(17674),d=t(49501),u=t(48949),x=t(80227),h=t(21386),p=t(50594),j=t(29630),b=t(81645),m=t(54181),f=t(93481),v=t(9144),g=t(30120),y=t(46541),E=t(31538),O=t(44373),w=t(86777),I=t(90244),Z=t(93978),C=t(69417),D=t(84026),S=t(7272),T=t(39807),M=t(51967),k=t(41024),L=t(68861),N=t(92391),F=t(72667),P=t(69331),A=t(46839),_=t(43478),R=t(46930),U=t(77537),B=t(63206),V=t(63491),H=t(67916),z=t(93608),Q=t(57824),W=t(78944),q=t(10343),G=t(50029),X=t(87794),Y=t.n(X),J=t(75331),K=t(89291),$=t(78371),ee=t(67489),re=t(32667),te=t(85893),ne=function(e){var r=e.isWrongNetwork,t=e.blocked,n=e.selectedEmode,i=e.activeEmode,o=e.eModes,a=(0,$.Y)((function(e){return e.setUserEMode})),s=(0,K.Q)({tryPermit:!1,handleGetTxns:function(){var e=(0,G.Z)(Y().mark((function e(){return Y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a(n));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),skip:t,deps:[n],protocolAction:J.UQ.setEModeUsage,eventTxInfo:{previousState:(0,re.U)(o[i].label),newState:(0,re.U)(o[n].label)}}),c=s.action,l=s.loadingTxns,u=s.mainTxState,x=s.requiresApproval;return(0,te.jsx)(ee.B,{requiresApproval:x,blocked:t,mainTxState:u,preparingTransactions:l,handleAction:c,actionText:0===i?(0,te.jsx)(d.cC,{id:"Enable E-Mode"}):0!==n?(0,te.jsx)(d.cC,{id:"Switch E-Mode"}):(0,te.jsx)(d.cC,{id:"Disable E-Mode"}),actionInProgressText:0===i?(0,te.jsx)(d.cC,{id:"Enabling E-Mode"}):0!==n?(0,te.jsx)(d.cC,{id:"Switching E-Mode"}):(0,te.jsx)(d.cC,{id:"Disabling E-Mode"}),isWrongNetwork:r})};function ie(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function oe(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ie(Object(t),!0).forEach((function(r){(0,c.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ie(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function ae(e,r){var t=r.assets.filter((function(e){return e.borrowable})).map((function(e){return e.underlyingAsset}));return!e.userReservesData.some((function(e){return Number(e.scaledVariableDebt)>0&&!t.includes(e.reserve.underlyingAsset)}))}!function(e){e[e.EMODE_DISABLED_LIQUIDATION=0]="EMODE_DISABLED_LIQUIDATION",e[e.CLOSE_POSITIONS_BEFORE_SWITCHING=1]="CLOSE_POSITIONS_BEFORE_SWITCHING"}(n||(n={}));var se=function(e){var r=e.user,t=(0,A.HT)(),o=t.reserves,s=t.eModes,G=t.marketReferenceCurrencyDecimals,X=t.marketReferencePriceInUsd,Y=t.userReserves,J=(0,R.f)().currentChainId,K=(0,U.Z)(),$=K.chainId,ee=K.readOnlyModeAddress,re=(0,_.p)(1),ie=(0,a.vR)(),se=ie.gasLimit,ce=ie.mainTxState,le=ie.txError,de=(0,i.useState)(!1),ue=de[0],xe=de[1],he=Object.fromEntries(Object.entries(s).map((function(e){var t=(0,l.Z)(e,2),n=t[0],i=t[1];return[n,oe(oe({},i),{},{available:ae(r,i)})]}))),pe=(0,i.useState)(0===r.userEmodeCategoryId?he[1]:he[r.userEmodeCategoryId]),je=pe[0],be=pe[1],me=(0,B.Mo)(J),fe=(0,u.G)({currentTimestamp:re,userReserves:Y,formattedReserves:o,userEmodeCategoryId:ue?0:je.id,marketReferenceCurrencyDecimals:G,marketReferencePriceInUsd:X}),ve=void 0;r.isInEmode&&ue&&Number(fe.healthFactor)<1.01&&"-1"!==fe.healthFactor&&(ve=n.EMODE_DISABLED_LIQUIDATION);var ge=function(){return ve===n.EMODE_DISABLED_LIQUIDATION?(0,te.jsxs)(P.v,{severity:"error",sx:{mt:6,alignItems:"center"},children:[(0,te.jsx)(j.Z,{variant:"subheader1",color:"#4F1919",children:(0,te.jsx)(d.cC,{id:"Cannot disable E-Mode"})}),(0,te.jsx)(j.Z,{variant:"caption",children:(0,te.jsx)(d.cC,{id:"You can not disable E-Mode because that could cause liquidation. To exit E-Mode supply or repay borrowed positions."})})]}):null},ye=J!==$,Ee=function(){return(0,te.jsx)(b.Z,{color:"primary",sx:{fontSize:"14px",mx:1},children:(0,te.jsx)(x.Z,{})})},Oe=0!==r.userEmodeCategoryId&&ue&&void 0===ve&&Number(fe.healthFactor).toFixed(3)<Number(r.healthFactor).toFixed(3),we="0"!==r.currentLoanToValue&&Number(fe.currentLoanToValue).toFixed(3)!==Number(r.currentLoanToValue).toFixed(3);if(le&&le.blocking)return(0,te.jsx)(V.D,{txError:le});if(ce.success)return(0,te.jsx)(z.R,{action:(0,te.jsx)(d.cC,{id:"Emode"})});return(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(W.E,{title:(0,te.jsx)(d.cC,{id:"Manage E-Mode"})}),ye&&!ee&&(0,te.jsx)(q.I,{networkName:me.name,chainId:J}),(0,te.jsx)(j.Z,{variant:"caption",children:(0,te.jsx)(d.cC,{id:"Enabling E-Mode allows you to maximize your borrowing power, however, borrowing is restricted to assets within the selected category. <0>Learn more</0> about how it works and the applied restrictions.",components:{0:(0,te.jsx)(L.rU,{sx:{textDecoration:"underline"},variant:"caption",href:"https://aave.com/help/borrowing/e-mode",target:"_blank",rel:"noopener"})}})}),ve===n.EMODE_DISABLED_LIQUIDATION&&(0,te.jsx)(ge,{}),Oe&&(0,te.jsxs)(P.v,{severity:"error",sx:{mt:6,alignItems:"center"},children:[(0,te.jsx)(j.Z,{variant:"subheader1",color:"#4F1919",children:(0,te.jsx)(d.cC,{id:"Liquidation risk"})}),(0,te.jsx)(j.Z,{variant:"caption",children:(0,te.jsx)(d.cC,{id:"This action will reduce your health factor. Please be mindful of the increased risk of collateral liquidation."})})]}),(0,te.jsxs)(Q.m6,{gasLimit:se,children:[0!==r.userEmodeCategoryId&&(0,te.jsx)(N.X,{caption:(0,te.jsx)(d.cC,{id:"Disable E-Mode"}),captionVariant:"description",mb:4,children:(0,te.jsx)(m.Z,{disableRipple:!0,checked:ue,onClick:function(){return xe(!ue)}})}),(0,te.jsxs)(f.Z,{in:ue,children:[(0,te.jsx)(N.X,{captionVariant:"description",my:2,caption:(0,te.jsx)(M.y,{variant:"description",text:(0,te.jsx)(d.cC,{id:"Max LTV"})}),children:(0,te.jsxs)(v.Z,{direction:"row",children:[we&&(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(k.B,{percent:!0,visibleDecimals:2,value:r.currentLoanToValue,variant:"secondary12"}),(0,te.jsx)(Ee,{})]}),(0,te.jsx)(k.B,{percent:!0,visibleDecimals:2,value:fe.currentLoanToValue,variant:"secondary12"})]})}),(0,te.jsx)(Q.jz,{visibleHfChange:!!je,healthFactor:r.healthFactor,futureHealthFactor:fe.healthFactor})]}),(0,te.jsx)(f.Z,{in:!ue,children:(0,te.jsxs)(g.Z,{children:[(0,te.jsxs)(v.Z,{direction:"column",children:[(0,te.jsx)(j.Z,{mb:1,variant:"caption",color:"text.secondary",children:(0,te.jsx)(d.cC,{id:"Asset category"})}),(0,te.jsx)(y.Z,{sx:{mb:3,width:"100%",height:"44px",borderRadius:"6px",borderColor:"divider",outline:"none !important",color:"text.primary",".MuiOutlinedInput-input":{backgroundColor:"transparent"},"&:hover .MuiOutlinedInput-notchedOutline, .MuiOutlinedInput-notchedOutline":{borderColor:"divider",outline:"none !important",borderWidth:"1px"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"divider",borderWidth:"1px"},".MuiSelect-icon":{color:"text.primary"}},value:je.id,onChange:function(e){return function(e){var r=he[e];if(!r)throw new Error("EMode with id ".concat(e," not found"));be(r)}(Number(e.target.value))},children:Object.values(he).filter((function(e){return 0!==e.id})).sort((function(e,r){return e.available!==r.available?e.available?-1:1:e.id-r.id})).map((function(e){return(0,te.jsx)(E.Z,{value:e.id,children:(0,te.jsxs)(v.Z,{sx:{width:"100%"},direction:"row",justifyContent:"space-between",children:[(0,te.jsx)(j.Z,{sx:{opacity:e.available?1:.5},fontStyle:e.available?"normal":"italic",children:e.label}),e.id===r.userEmodeCategoryId&&(0,te.jsxs)(g.Z,{sx:{display:"inline-flex",alignItems:"center"},children:[(0,te.jsx)(g.Z,{sx:{width:"6px",height:"6px",borderRadius:"50%",bgcolor:"success.main",boxShadow:"0px 2px 1px rgba(0, 0, 0, 0.05), 0px 0px 1px rgba(0, 0, 0, 0.25)",mr:"5px"}}),(0,te.jsx)(j.Z,{variant:"subheader2",color:"success.main",children:(0,te.jsx)(d.cC,{id:"Enabled"})})]}),!e.available&&(0,te.jsx)(j.Z,{variant:"caption",color:"text.secondary",fontStyle:"italic",children:(0,te.jsx)(d.cC,{id:"Unavailable"})})]})},e.id)}))})]}),!je.available&&(0,te.jsx)(j.Z,{variant:"caption",color:"text.secondary",sx:{mb:3},children:(0,te.jsx)(d.cC,{id:"All borrow positions outside of this category must be closed to enable this category."})}),(0,te.jsx)(O.Z,{}),(0,te.jsx)(N.X,{captionVariant:"description",my:2,caption:(0,te.jsx)(M.y,{variant:"description",text:(0,te.jsx)(d.cC,{id:"Max LTV"})}),children:(0,te.jsxs)(v.Z,{direction:"row",children:[we&&(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(k.B,{percent:!0,visibleDecimals:2,value:r.currentLoanToValue,variant:"secondary12"}),(0,te.jsx)(Ee,{})]}),(0,te.jsx)(k.B,{percent:!0,visibleDecimals:2,value:Number(je.ltv)/1e4,variant:"secondary12"})]})}),(0,te.jsx)(Q.jz,{visibleHfChange:je.id!==r.userEmodeCategoryId,healthFactor:r.healthFactor,futureHealthFactor:fe.healthFactor}),(0,te.jsx)(w.Z,{sx:{maxHeight:"270px"},children:(0,te.jsxs)(I.Z,{size:"small",stickyHeader:!0,children:[(0,te.jsx)(Z.Z,{children:(0,te.jsxs)(C.Z,{sx:(0,c.Z)({},"& .".concat(D.Z.root),{py:2,lineHeight:0}),children:[(0,te.jsx)(S.Z,{align:"center",sx:{pl:0,width:"120px"},children:(0,te.jsx)(j.Z,{variant:"helperText",children:(0,te.jsx)(d.cC,{id:"Asset"})})}),(0,te.jsx)(S.Z,{align:"center",children:(0,te.jsx)(j.Z,{variant:"helperText",children:(0,te.jsx)(d.cC,{id:"Collateral"})})}),(0,te.jsx)(S.Z,{align:"center",children:(0,te.jsx)(j.Z,{variant:"helperText",children:(0,te.jsx)(d.cC,{id:"Borrowable"})})})]})}),(0,te.jsx)(T.Z,{sx:{width:"100%"},children:je.assets.map((function(e,r){return(0,te.jsxs)(C.Z,{sx:(0,c.Z)({pt:8},"& .".concat(D.Z.root),{borderBottom:"none",pt:3,pb:2}),children:[(0,te.jsx)(S.Z,{align:"center",sx:{py:1},children:(0,te.jsxs)(v.Z,{direction:"row",gap:1,alignItems:"center",children:[(0,te.jsx)(F.T1,{symbol:e.iconSymbol,sx:{fontSize:"16px"}}),(0,te.jsx)(j.Z,{variant:"secondary12",children:e.symbol})]})}),(0,te.jsx)(S.Z,{align:"center",children:e.collateral?(0,te.jsx)(h.Z,{fontSize:"small",color:"success"}):(0,te.jsx)(p.Z,{fontSize:"small",color:"error"})}),(0,te.jsx)(S.Z,{align:"center",children:e.borrowable?(0,te.jsx)(h.Z,{fontSize:"small",color:"success"}):(0,te.jsx)(p.Z,{fontSize:"small",color:"error"})})]},r)}))})]})})]})})]}),le&&(0,te.jsx)(H.Q,{txError:le}),ue?(0,te.jsx)(ne,{isWrongNetwork:ye,blocked:void 0!==ve,selectedEmode:0,activeEmode:r.userEmodeCategoryId,eModes:he}):(0,te.jsx)(ne,{isWrongNetwork:ye,blocked:void 0!==ve||!je.available||je.id===r.userEmodeCategoryId,selectedEmode:ue?0:je.id,activeEmode:r.userEmodeCategoryId,eModes:he})]})},ce=function(){var e=(0,a.vR)(),r=e.type,t=e.close;return(0,te.jsx)(s.P,{open:r===a.w8.Emode,setOpen:t,children:(0,te.jsx)(o.X,{children:function(e){return(0,te.jsx)(se,{user:e})}})})}},32667:function(e,r,t){t.d(r,{U:function(){return n}});var n=function(e){return""===e?"Disabled":e}},43478:function(e,r,t){t.d(r,{p:function(){return a}});var n=t(27484),i=t.n(n),o=t(67294);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15,r=(0,o.useState)(0),t=r[0],n=r[1],a=(0,o.useState)(0),s=a[0],c=a[1];return(0,o.useEffect)((function(){var r=setInterval((function(){return c(i()().unix()+t)}),1e3*e);return function(){return clearInterval(r)}}),[e,t]),(0,o.useEffect)((function(){var e=Number(localStorage.getItem("forkTimeAhead")||0);n(e),c(i()().unix()+e)}),[]),s}}}]);